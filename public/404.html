<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>VyaktigatavRtta Resume Builder</title>
  <script>
    // GitHub Pages 404 handler for Angular client-side routing
    (function() {
      // Simple but reliable 404 handler for GitHub Pages + Angular
      // Based on: https://github.com/rafgraph/spa-github-pages
      
      // Prevent redirect loops by checking sessionStorage
      if (sessionStorage.getItem('redirecting')) {
        console.error('Redirect loop detected, stopping navigation');
        sessionStorage.removeItem('redirecting');
        document.write('Redirect loop detected. <a href="/ida/">Click here</a> to go to homepage.');
        return;
      }
      
      const location = window.location;
      const pathSegments = location.pathname.split('/');
      const repoName = 'ida';  // Hardcode the repo name for reliability
      
      // Simple path handling
      const pathname = location.pathname;
      
      // Only redirect if not already at the repo root
      if (pathname !== '/' + repoName + '/') {
        // Set a flag to detect infinite loops
        sessionStorage.setItem('redirecting', 'true');
        
        // Create a clean path (without repo name if it's included)
        let cleanPath = pathname;
        if (pathname.indexOf('/' + repoName + '/') === 0) {
          // Remove the /repoName/ prefix if present
          cleanPath = pathname.substr(repoName.length + 2) || '/';
        }
        
        // Store the path for redirect after navigation
        sessionStorage.setItem('redirect', cleanPath + location.search + location.hash);
        console.log('Storing redirect path:', cleanPath);
        
        // Set a timeout to clear the redirecting flag in case the redirect fails
        setTimeout(function() {
          sessionStorage.removeItem('redirecting');
        }, 1000);
        
        // Redirect to the app's base URL
        window.location.replace(location.origin + '/' + repoName + '/');
      }
    })();
  </script>
</head>
<body>
  <p>Redirecting to the application...</p>
</body>
</html>
